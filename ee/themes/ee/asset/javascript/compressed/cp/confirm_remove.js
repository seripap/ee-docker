/*!
 * This source file is part of the open source project
 * ExpressionEngine (https://expressionengine.com)
 *
 * @link      https://expressionengine.com/
 * @copyright Copyright (c) 2003-2018, EllisLab, Inc. (https://ellislab.com)
 * @license   https://expressionengine.com/license Licensed under Apache License, Version 2.0
 */
$(document).ready(function(){$("body").on("click","*[data-conditional-modal]",function(t){var e=$(this).data("conditional-modal"),i=$(this).data("confirm-ajax"),a=$(this).data("confirm-text"),n=$(this).data("confirm-input"),l=$("*[data-"+e+"]").closest("select").get(0),o=$(l.options[l.selectedIndex]);if($(o).data(e)&&$(o).prop($(o).data(e))){t.preventDefault();var r="."+$(o).attr("rel"),d=$(r+", [rel="+$(o).attr("rel")+"]");$(r+" .checklist").html(""),"undefined"!=typeof a&&$(r+" .checklist").append("<li>"+a+"</li>");var c=$(this).parents("form").find("th input:checked, td input:checked, li input:checked");if(c=c.filter(function(t,e){return void 0!==$(e).attr("value")}),"modal-edit"==o.attr("rel")){var s=$.map(c,function(t){return $(t).val()});EE.cp.ModalForm.openForm({url:EE.publishEdit.sequenceEditFormUrl.replace("###",s[0]+"&"+$.param({entry_ids:s})),full:!0,iframe:!0,success:function(){location.reload()},load:function(t){var e=t.find("> iframe").last().contents().find("meta[name=modal-title]").attr("content");EE.cp.ModalForm.setTitle(e)}})}if("modal-bulk-edit"==o.attr("rel"))return EE.cp.BulkEdit.openForm(o.val(),c);c.length<6?c.each(function(){$(r+" .checklist").append("<li>"+$(this).attr("data-confirm")+"</li>")}):$(r+" .checklist").append("<li>"+EE.lang.remove_confirm.replace("###",c.length)+"</li>"),c.each(function(){$(r+" .checklist li:last").append($("<input/>").attr({type:"hidden",name:$(this).attr("name"),value:$(this).val()}))}),"undefined"!=typeof n&&$("input[name='"+n+"']").each(function(){$(r+" .checklist li:last").append($("<input/>").attr({type:"hidden",name:$(this).attr("name"),value:$(this).val()}))}),$(r+" .checklist li:last").addClass("last"),"undefined"!=typeof i&&$.post(i,$(r+" form").serialize(),function(t){$(r+" .ajax").html(t),SelectField.renderFields()}),d.trigger("modal:open")}})}),EE.cp.Modal={openConfirmRemove:function(t,e,i,a){var n=$(".modal-default-confirm-remove"),l=n.find("form"),o=n.find('input[name="content_id"]');$(".checklist",n).html("").append("<li>"+e+"</li>"),o.val(i),l.attr("action",t),n.trigger("modal:open"),n.find("form").submit(function(){return $.post(this.action,$(this).serialize(),function(t){n.trigger("modal:close"),a(t)}),!1})}};