"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,a,t){return a&&e(n.prototype,a),t&&e(n,t),n}}(),MutableRelationshipField=function(){function e(n,a){_classCallCheck(this,e),this.field=n,this.options=a,this.bindAdd()}return _createClass(e,[{key:"bindAdd",value:function(){var e=this;this.field.closest("[data-relationship-react]").parent().find("[rel=add_new][data-channel-id]").on("click",function(n){n.preventDefault();var a=$(n.currentTarget);e.openPublishFormForChannel(a.data("channelId"),a.data("channelTitle")),a.closest(".sub-menu").length&&a.closest(".filters").find(".open").removeClass("open").siblings(".sub-menu").hide()})}},{key:"openPublishFormForChannel",value:function(e,n){var a=this;EE.cp.ModalForm.openForm({url:EE.relationship.publishCreateUrl.replace("###",e),full:!0,iframe:!0,success:this.options.success,load:function(e){var t=a.field.closest("[data-publish]").find("input[name=title]").val(),l=EE.relationship.lang.creatingNew.replace("#to_channel#",n).replace("#from_channel#",EE.publish.channel_title);t&&(l+="<b>: "+t+"</b>"),EE.cp.ModalForm.setTitle(l)}})}}]),e}();