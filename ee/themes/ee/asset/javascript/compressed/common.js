/*!
 * This source file is part of the open source project
 * ExpressionEngine (https://expressionengine.com)
 *
 * @link      https://expressionengine.com/
 * @copyright Copyright (c) 2003-2018, EllisLab, Inc. (https://ellislab.com)
 * @license   https://expressionengine.com/license Licensed under Apache License, Version 2.0
 */
$(document).ready(function(){function e(e){var t,i,o,s;return t=document.createElement("iframe"),t.style.display="none",document.body.appendChild(t),i=t.contentDocument||t.contentWindow.document,o=i.createElement("script"),o.type="text/javascript",o.text='window.parent = null; window.top = null;window.frameElement = null; var child = window.open("'+e+'");if (child) { child.opener = null }',i.body.appendChild(o),s=t.contentWindow.child,document.body.removeChild(t),s}jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},jQuery.browser||(matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser),$("body").on("click",'a[rel*="external"]',function(t){e(this.href),t.preventDefault()}),$(".scroll").on("click",function(){return $("#top, html").animate({scrollTop:0},800),!1}),$(".setting-field .scroll-wrap").each(function(){var e=$(this).height();e>="200"&&$(this).addClass("pr")}),$(".tbl-wrap").each(function(){var e=$(this).width(),t=$(this).children("table").width();e<t&&$(this).addClass("pb")}),$("body").on("click",".has-sub",function(){return $(".open").not(this).removeClass("open").siblings(".sub-menu").hide(),$(this).siblings(".sub-menu").toggle().end().toggleClass("open"),!1}),$(document).on("click",function(e){$(e.target).closest(".sub-menu").length||$(".open").removeClass("open").siblings(".sub-menu").hide()}),$(".nav-has-sub").on("click",function(){return $(".nav-open").not(this).removeClass("nav-open").siblings(".nav-sub-menu").hide(),$(this).siblings(".nav-sub-menu").toggle().end().toggleClass("nav-open"),$(this).siblings(".nav-sub-menu").find(".autofocus").focus(),!1}),$(document).on("click",function(e){$(e.target).closest(".nav-sub-menu").length||$(".nav-open").removeClass("nav-open").siblings(".nav-sub-menu").hide()}),$(document).on("click",function(e){$(e.target).closest(".sub-menu, .date-picker-wrap").length||$(".open").removeClass("open").siblings(".sub-menu").hide()}),$("body").on("click",".tab-wrap ul.tabs a",function(){var e=$(this).attr("rel");return $(".tb-act").removeClass("tb-act"),$(this).parents("ul").parents(".tab-wrap").addClass("tb-act"),$(".tb-act ul a").not(this).removeClass("act"),$(".tb-act .tab").not(".tab."+e+".tab-open").removeClass("tab-open"),$(this).addClass("act"),$(".tb-act .tab."+e).addClass("tab-open"),!1}),$(".version-info").hide(),$(".version").on("click",function(e){$(".version-info").show(),e.preventDefault()}),$(".version-info .close").on("click",function(){return $(".version-info").hide(),!1}),$(".js-about").on("click",function(e){$(".app-about-info").show().trigger("display"),e.preventDefault()}),$(".js-about-close").on("click",function(e){$(".app-about-info").hide(),e.preventDefault()}),$(".app-about-info").on("display",function(){$(".app-about-info__update:visible").size()>0&&$.get(EE.cp.updateCheckURL,function(e){e.newVersionMarkup?($(".app-about-info__status, .app-about-info__update").hide(),$(".app-about-info__installed").after(e.newVersionMarkup),e.isVitalUpdate?$(".app-about-info__status--update-vital").show():$(".app-about-info__status--update").show()):$(".app-about-info__update").hide()})}),$(".overlay, .modal-wrap, .modal-form-wrap").hide(),$("body").on("click",".disable",function(){return!1}),$("body").on("modal:open",".modal-wrap, .modal-form-wrap, .app-modal",function(e){var t=$(document).height();$(".app-overlay").removeClass("app-overlay--destruct").removeClass("app-overlay---closed").addClass("app-overlay---open").css("height",t),e.linkIs&&(e.linkIs.indexOf("js-modal--destruct")!==-1&&$(".app-overlay").addClass("app-overlay--destruct"),e.linkIs.indexOf("js-modal--warning")!==-1&&$(".app-overlay").addClass("app-overlay--warning")),$(this).hasClass("modal-wrap")?$(this).fadeIn("slow"):$(this).removeClass("app-modal---closed").addClass("app-modal---open"),e.linkIs&&e.linkIs.indexOf("js-modal-link--side")!==-1&&$("body").css("overflow","hidden"),"live-preview"==e.modalIs&&$(".live-preview").removeClass("live-preview---closed").addClass("live-preview---open"),$(this).data("scroll",$(document).scrollTop()),$(this).is(".modal-form-wrap, .app-modal--side")?$("body").css("overflow","hidden"):setTimeout(function(){$(document).scrollTop(0)},100)}),$(document).on("keydown",function(e){27===e.keyCode&&$(".modal-wrap, .modal-form-wrap, .app-modal").trigger("modal:close")}),$("body").on("modal:close",".modal-wrap, .modal-form-wrap, .app-modal",function(e){var t=$(this);if(t.is(":visible")){$(".overlay").fadeOut("slow"),t.hasClass("modal-wrap")?t.fadeOut("fast"):(t.addClass("app-modal---closed"),setTimeout(function(){t.removeClass("app-modal---open")},500),t.hasClass("app-modal--live-preview")&&($(".live-preview---open").addClass("live-preview---closed"),setTimeout(function(){$(".live-preview---open").removeClass("live-preview---open")},500))),$(".app-overlay---open").addClass("app-overlay---closed"),setTimeout(function(){$(".app-overlay---open").removeClass("app-overlay---open").removeClass("app-overlay--destruct").removeClass("app-overlay--warning")},500),setTimeout(function(){$("body").css("overflow","")},200),$(this).is(".modal-form-wrap, .app-modal")?$("body").css("overflow","hidden"):$(document).scrollTop($(this).data("scroll"));var i=$(".form-ctrls input.btn, .form-ctrls button.btn",this);i.removeClass("work"),i.val(i.data("submit-text"))}}),$("body").on("click",".m-link",function(e){var t=$(this).attr("rel");$("."+t).trigger("modal:open"),e.preventDefault()}),$("body").on("click",'[class*="js-modal-link"]',function(e){var t=$(this).attr("rel"),i=$(this).attr("class"),o=$(this).attr("disabled");"version-check"!=$(this).data("for")&&("disabled"===o||""==t?e.preventDefault():($("[rev="+t+"]").trigger({type:"modal:open",modalIs:t,linkIs:i}),e.preventDefault()))}),$("body").on("click",".m-close, .js-modal-close",function(e){$(this).closest(".modal-wrap, .modal-form-wrap, .app-modal").trigger("modal:close"),e.preventDefault()}),$("body").on("click",".overlay, .app-overlay---open",function(){$(".modal-wrap, .modal-form-wrap, .app-modal").trigger("modal:close")}),$("body").on("click",".multi-select .ctrl-all input",function(){$(this).closest(".multi-select").find(".choice input[type=checkbox]").prop("checked",$(this).is(":checked")).trigger("change")}),$("body").on("click",".field-inputs label input",function(){$('input[name="'+$(this).attr("name")+'"]').each(function(e,t){$(this).parents("label").toggleClass("act",$(this).is(":checked"))})}),$("body").on("click","table tr",function(e){"A"!=e.target.nodeName&&$(this).children("td:last-child").children("input[type=checkbox]").click()}),$("body").on("click","table tr td:last-child input[type=checkbox]",function(e){e.stopPropagation()}),$("body").on("change","table tr td:last-child input[type=checkbox], table tr th:last-child input[type=checkbox]",function(){$(this).parents("tr").toggleClass("selected",$(this).is(":checked")),0==$(this).parents("table").find("input:checked").length?$(this).parents(".tbl-wrap").siblings(".tbl-bulk-act").hide():$(this).parents(".tbl-wrap").siblings(".tbl-bulk-act").show()}),$("body").on("click",".tbl-row",function(e){"DIV"==e.target.nodeName&&$(this).find("> .check-ctrl input").click()}),$("body").on("click change",".tbl-list .check-ctrl input",function(){$(this).parents(".tbl-row").toggleClass("selected",$(this).is(":checked"));var e=$(this).parents(".tbl-list"),t=e.find(".check-ctrl input:checked").length==e.find(".check-ctrl input").length;$(this).parents(".tbl-list-wrap").find(".tbl-list-ctrl input").prop("checked",t),0==e.find(".check-ctrl input:checked").length?$(this).parents(".tbl-list-wrap").siblings(".tbl-bulk-act").hide():$(this).parents(".tbl-list-wrap").siblings(".tbl-bulk-act").show()}),$("body").on("click",".tbl-list-ctrl input",function(){$(this).parents(".tbl-list-wrap").find(".tbl-list .check-ctrl input").prop("checked",$(this).is(":checked")).trigger("change")}),$(".grid-next").on("click",function(e){$(".grid-clip").animate({scrollLeft:"+=310"},800),e.preventDefault()}),$(".grid-back").on("click",function(e){$(".grid-clip").animate({scrollLeft:"-=310"},800),e.preventDefault()}),$(".js-toggle-field").not(".fluid-ctrls .js-toggle-field").on("click",function(){$(this).parents("fieldset,.fieldset-faux-fluid,.fieldset-faux").toggleClass("fieldset---closed")}),$("body").on("click",".fieldset-faux-fluid .fluid-ctrls .js-toggle-field",function(){$(this).closest(".fluid-item").toggleClass("fluid-closed")}),$('input[type="range"]').on("input",function(){var e=$(this).val(),t=$(this).attr("id");$('output[for="'+t+'"]').html(e)}),$('.filters .filter-search input[type="text"], .filters .filter-search-form input[type="text"]').keypress(function(e){10!=e.which&&13!=e.which||$(this).closest("form").submit()}),$("body").on("click","a.toggle-btn",function(e){if(!($(this).hasClass("disabled")||$(this).parents(".toggle-tools").size()>0||$(this).parents("[data-reactroot]").size()>0)){var t=$(this).find('input[type="hidden"]'),i=$(this).hasClass("yes_no"),o=$(this).hasClass("off")?"on":"off",s=$(this).hasClass("off")?"true":"false";$(this).hasClass("off")?($(this).removeClass("off"),$(this).addClass("on"),$(t).val(i?"y":1)):($(this).removeClass("on"),$(this).addClass("off"),$(t).val(i?"n":0)),$(this).attr("alt",o),$(this).attr("data-state",o),$(this).attr("aria-checked",s),$(t).data("groupToggle")&&EE.cp.form_group_toggle(t),e.preventDefault()}}),$("body").on("click",".js-filter-link",function(){return $(".filter-item__link---active").not(this).removeClass("filter-item__link---active").siblings(".filter-submenu").hide(),$(this).siblings(".filter-submenu").toggle().end().toggleClass("filter-item__link---active"),!1}),$(document).on("click",function(e){$(e.target).closest(".filter-submenu").length||$(".filter-item__link---active").removeClass("filter-item__link---active").siblings(".filter-submenu").hide(),$(e.target).closest(".app-about").length||$(".app-about-info:visible").hide()})});